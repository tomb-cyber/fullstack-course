(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(15),c=t.n(a),r=t(2),s=t(6),u=t(3),o=t(4),i=t.n(o),l="/api/persons",d={getAll:function(){var e=i.a.get(l),n={id:1e4,name:"non-existing",number:"00000000"};return e.then((function(e){return e.data.concat(n)}))},create:function(e){return i.a.post(l,e).then((function(e){return e.data}))},update:function(e,n){return i.a.put("".concat(l,"/").concat(n),e).then((function(e){return e.data}))},deletePerson:function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return console.log(e)}))}},m=t(0),h=function(e){var n=e.message,t=e.className;return null===n?null:Object(m.jsx)("div",{className:t,children:n})},b=(t(39),function(e){return Object(m.jsxs)("li",{children:[e.name," ",e.number,Object(m.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(e.name,"?"))&&(d.deletePerson(e.id).catch((function(){e.setTempMessage("Person '".concat(e.name,"' was already removed from server"),"red")})),e.setTempMessage("Person '".concat(e.name,"' succesfully removed"),"green"),e.handleDelete(e.id))},children:"delete"})]})}),j=function(e){var n=e.search,t=e.handleSearchChange;return Object(m.jsxs)("div",{children:["Filter shown with: ",Object(m.jsx)("input",{value:n,onChange:t})]})},f=function(e){return Object(m.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){return Object(m.jsx)("ul",{children:e.persons.map((function(n){return Object(m.jsx)(b,{id:n.id,name:n.name,number:n.number,handleDelete:e.handleDelete,setTempMessage:e.setTempMessage},n.id)}))})},g=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),o=Object(u.a)(c,2),i=o[0],l=o[1],b=Object(r.useState)(""),g=Object(u.a)(b,2),p=g[0],v=g[1],x=Object(r.useState)(""),w=Object(u.a)(x,2),N=w[0],C=w[1],S=Object(r.useState)({message:null,className:"red"}),y=Object(u.a)(S,2),P=y[0],D=y[1],T=function(e,n){D({message:e,className:n}),setTimeout((function(){D({message:"",className:null})}),5e3)};Object(r.useEffect)((function(){d.getAll().then((function(e){a(e)}))}),[]);var k=""===N?t:t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(m.jsxs)("div",{children:[Object(m.jsx)(h,{message:P.message,className:P.className}),Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(j,{search:N,handleSearchChange:function(e){C(e.target.value)}}),Object(m.jsx)("h2",{children:"Add a new contact"}),Object(m.jsx)(f,{onSubmit:function(e){e.preventDefault();var n={name:i,number:p};t.map((function(e){return e.name})).includes(i)?window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))&&(n=Object(s.a)(Object(s.a)({},t.find((function(e){return e.name===i}))),{},{number:p}),d.update(n,n.id).then((function(e){a(t.map((function(t){return t.id!==n.id?t:e}))),T("Person ".concat(i," was updated succesfully"),"green")})).catch((function(){T("Person '".concat(i,"' was already removed from server"),"red"),a(t.filter((function(e){return e.id!==n.id})))}))):d.create(n).then((function(e){a(t.concat(e)),T("Person '".concat(i,"' was succesfully added"),"green")})).catch((function(e){console.log(e.response.data),T(e.response.data.error,"red")})),l(""),v("")},newName:i,handleNameChange:function(e){l(e.target.value)},newNumber:p,handleNumberChange:function(e){v(e.target.value)}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(O,{persons:k,handleDelete:function(e){a(t.filter((function(n){return n.id!==e})))},setTempMessage:T})]})};c.a.render(Object(m.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.b79416ad.chunk.js.map