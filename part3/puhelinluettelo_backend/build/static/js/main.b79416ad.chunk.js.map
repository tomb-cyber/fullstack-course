{"version":3,"sources":["services/persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","exported","getAll","request","axios","get","nonExisting","id","name","number","then","response","data","concat","create","newPerson","post","update","put","deletePerson","delete","res","console","log","Notification","message","className","Person","props","onClick","window","confirm","personService","catch","setTempMessage","handleDelete","Filter","search","handleSearchChange","value","onChange","PersonForm","onSubmit","newName","handleNameChange","newNumber","handleNumberChange","type","Persons","persons","map","person","App","useState","setPersons","setNewName","setNewNumber","newSearch","setNewSearch","setMessage","setTimeout","useEffect","initialPersons","shownPersons","filter","toLowerCase","includes","event","target","preventDefault","find","p","returned","error","ReactDOM","render","document","getElementById"],"mappings":"yMACMA,EAAU,eAiCDC,EAFE,CAAEC,OA7BJ,WACb,IAAMC,EAAUC,IAAMC,IAAIL,GAEpBM,EAAc,CAClBC,GAAI,IACJC,KAAM,eACNC,OAAQ,YAGV,OAAON,EAAQO,MAAK,SAAAC,GAAQ,OAAIA,EAASC,KAAKC,OAAOP,OAoB5BQ,OAVZ,SAAAC,GAEb,OADgBX,IAAMY,KAAKhB,EAASe,GACrBL,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQRK,OALpB,SAACF,EAAWR,GAEzB,OADgBH,IAAMc,IAAN,UAAalB,EAAb,YAAwBO,GAAMQ,GAC/BL,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAGAO,aAjBtB,SAACZ,GAAD,OACnBH,IAAMgB,OAAN,UAAgBpB,EAAhB,YAA2BO,IACtBG,MAAK,SAAAW,GAAG,OACPC,QAAQC,IAAIF,Q,OCJLG,EAZM,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,UAC7B,OAAgB,OAAZD,EACK,KAIP,qBAAKC,UAAWA,EAAhB,SACGD,KCHHE,G,MAAS,SAACC,GAiBd,OACE,+BACGA,EAAMpB,KADT,IACgBoB,EAAMnB,OACpB,wBAAQoB,QAnBS,WACfC,OAAOC,QAAP,iBAAyBH,EAAMpB,KAA/B,QACFwB,EACCb,aAAaS,EAAMrB,IACnB0B,OAAM,WACLL,EAAMM,eAAN,kBAAgCN,EAAMpB,KAAtC,qCACE,UAGJoB,EAAMM,eAAN,kBAAgCN,EAAMpB,KAAtC,yBACE,SAEFoB,EAAMO,aAAaP,EAAMrB,MAOzB,yBAKA6B,EAAS,SAAC,GAAD,IAAEC,EAAF,EAAEA,OAAQC,EAAV,EAAUA,mBAAV,OACb,sDACqB,uBAAOC,MAAOF,EAAQG,SAAUF,QAKjDG,EAAa,SAACb,GAAD,OACjB,uBAAMc,SAAUd,EAAMc,SAAtB,UACE,yCACQ,uBAAOH,MAAOX,EAAMe,QAASH,SAAUZ,EAAMgB,sBAErD,2CACU,uBAAOL,MAAOX,EAAMiB,UAAWL,SAAUZ,EAAMkB,wBACzD,8BACE,wBAAQC,KAAK,SAAb,uBAMAC,EAAU,SAACpB,GAAD,OACd,6BACGA,EAAMqB,QAAQC,KAAI,SAAAC,GAAM,OACvB,cAAC,EAAD,CAAwB5C,GAAI4C,EAAO5C,GACnCC,KAAM2C,EAAO3C,KAAMC,OAAQ0C,EAAO1C,OAClC0B,aAAcP,EAAMO,aACpBD,eAAgBN,EAAMM,gBAHTiB,EAAO5C,UA0HX6C,EAjHH,WACV,MAA8BC,mBAAS,IAAvC,mBAAOJ,EAAP,KAAgBK,EAAhB,KACA,EAAgCD,mBAAS,IAAzC,mBAAQV,EAAR,KAAiBY,EAAjB,KACA,EAAoCF,mBAAS,IAA7C,mBAAQR,EAAR,KAAmBW,EAAnB,KACA,EAAoCH,mBAAS,IAA7C,mBAAQI,EAAR,KAAmBC,EAAnB,KACA,EAA8BL,mBAAS,CAAE5B,QAAS,KAAMC,UAAW,QAAnE,mBAAOD,EAAP,KAAgBkC,EAAhB,KAmBMzB,EAAiB,SAACT,EAASC,GAC/BiC,EACE,CAAElC,QAASA,EACVC,UAAWA,IAEdkC,YAAW,WACTD,EAAW,CAAElC,QAAS,GACVC,UAAW,SACtB,MAWLmC,qBAPa,WACX7B,EACC9B,SACAQ,MAAK,SAAAoD,GACJR,EAAWQ,QAGC,IAEhB,IA6CMC,EAA6B,KAAdN,EACAR,EACAA,EAAQe,QAAO,SAAAb,GAAM,OACpBA,EAAO3C,KAAKyD,cAAcC,SAAST,EAAUQ,kBAEnE,OACE,gCACE,cAAC,EAAD,CAAcxC,QAASA,EAAQA,QAASC,UAAWD,EAAQC,YAC3D,2CACA,cAAC,EAAD,CAAQW,OAAQoB,EAAWnB,mBAnFJ,SAAC6B,GAC1BT,EAAaS,EAAMC,OAAO7B,UAmFxB,mDACA,cAAC,EAAD,CAAYG,SAxDE,SAACyB,GACjBA,EAAME,iBACN,IAAItD,EAAY,CACdP,KAAMmC,EACNlC,OAAQoC,GAGLI,EAAQC,KAAI,SAAAC,GAAM,OAAIA,EAAO3C,QAAM0D,SAASvB,GAc3Cb,OAAOC,QAAP,UAAkBY,EAAlB,6EACF5B,EAAS,2BAAOkC,EAAQqB,MAAK,SAAAC,GAAC,OAAIA,EAAE/D,OAASmC,MAApC,IAA8ClC,OAAQoC,IAE/Db,EACGf,OAAOF,EAAWA,EAAUR,IAC5BG,MAAK,SAAA8D,GACJlB,EAAWL,EAAQC,KACjB,SAAAC,GAAM,OAAIA,EAAO5C,KAAOQ,EAAUR,GAChC4C,EACAqB,MAEJtC,EAAe,UAAD,OAAWS,EAAX,4BAA8C,YAE7DV,OAAM,WACLC,EAAe,WAAD,OAAYS,EAAZ,qCACZ,OACFW,EAAWL,EAAQe,QAAO,SAAAO,GAAC,OAAIA,EAAEhE,KAAOQ,EAAUR,WA7BxDyB,EACClB,OAAOC,GACPL,MAAK,SAAA8D,GACFlB,EAAWL,EAAQpC,OAAO2D,IAC1BtC,EAAe,WAAD,OAAYS,EAAZ,2BACZ,YAEHV,OAAM,SAAAwC,GACLnD,QAAQC,IAAIkD,EAAM9D,SAASC,MAC3BsB,EAAeuC,EAAM9D,SAASC,KAAK6D,MAAO,UAwBhDlB,EAAW,IACXC,EAAa,KAcsBb,QAASA,EAC9BC,iBA9FS,SAACuB,GACxBZ,EAAWY,EAAMC,OAAO7B,QA8FVM,UAAWA,EACXC,mBA5FW,SAACqB,GAC1BX,EAAaW,EAAMC,OAAO7B,UA4FxB,yCACA,cAAC,EAAD,CAASU,QAASc,EAAc5B,aAtFf,SAAC5B,GACpB+C,EAAWL,EAAQe,QAAO,SAAAb,GAAM,OAAIA,EAAO5C,KAAOA,OAsF/C2B,eAAgBA,QCvKvBwC,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.b79416ad.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n\r\n  const nonExisting = {\r\n    id: 10000,\r\n    name: 'non-existing',\r\n    number: '00000000'\r\n  }\r\n\r\n  return request.then(response => response.data.concat(nonExisting))\r\n}\r\n\r\nconst deletePerson = (id) => (\r\n  axios.delete(`${baseUrl}/${id}`)\r\n      .then(res => (\r\n        console.log(res)  \r\n    ))\r\n)\r\n\r\nconst create = newPerson => {\r\n  const request = axios.post(baseUrl, newPerson)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (newPerson, id) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newPerson)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst exported = { getAll, create, update, deletePerson }\r\n\r\nexport default exported","import React from 'react'\r\n\r\nconst Notification = ({ message, className }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className={className}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport './index.css'\n\n\nconst Person = (props) => {\n  const deletePerson = () => {\n    if (window.confirm(`Delete ${props.name}?`)) {\n      personService\n      .deletePerson(props.id)\n      .catch(() => {\n        props.setTempMessage(`Person '${props.name}' was already removed from server`,\n          'red')\n      })\n\n      props.setTempMessage(`Person '${props.name}' succesfully removed`,\n        'green')\n\n      props.handleDelete(props.id)\n    }\n  }\n\n  return(\n    <li>\n      {props.name} {props.number}\n      <button onClick={deletePerson}>delete</button>\n    </li>)\n}\n\n\nconst Filter = ({search, handleSearchChange}) => (\n  <div>\n    Filter shown with: <input value={search} onChange={handleSearchChange} />\n  </div>\n)\n\n\nconst PersonForm = (props) => (\n  <form onSubmit={props.onSubmit} >\n    <div>\n      name: <input value={props.newName} onChange={props.handleNameChange} />\n    </div>\n    <div>\n      number: <input value={props.newNumber} onChange={props.handleNumberChange}/></div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\n\nconst Persons = (props) => (\n  <ul>\n    {props.persons.map(person =>\n      <Person key={person.id} id={person.id} \n      name={person.name} number={person.number} \n      handleDelete={props.handleDelete}\n      setTempMessage={props.setTempMessage} />\n    )}\n  </ul>\n)\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearch, setNewSearch ] = useState('')\n  const [message, setMessage] = useState({ message: null, className: 'red'})\n\n  \n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchChange = (event) => {\n    setNewSearch(event.target.value)\n  }\n\n  const handleDelete = (id) => {\n    setPersons(persons.filter(person => person.id !== id))\n  }\n\n  const setTempMessage = (message, className) => {\n    setMessage(\n      { message: message,\n       className: className}\n    )\n    setTimeout(() => {\n      setMessage({ message: '',\n                  className: null})\n    }, 5000)\n  }\n\n\n  const hook = () => {\n    personService\n    .getAll()\n    .then(initialPersons => {\n      setPersons(initialPersons)\n    })\n  }\n  useEffect(hook, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    let newPerson = {\n      name: newName,\n      number: newNumber\n    }\n    \n    if (!persons.map(person => person.name).includes(newName)) {\n      personService\n      .create(newPerson)\n      .then(returned => {\n          setPersons(persons.concat(returned))\n          setTempMessage(`Person '${newName}' was succesfully added`,\n            'green')\n        })\n        .catch(error => {\n          console.log(error.response.data)\n          setTempMessage(error.response.data.error, 'red')\n        })\n    }\n    else {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        newPerson = {...persons.find(p => p.name === newName), number: newNumber}\n        \n        personService\n          .update(newPerson, newPerson.id)\n          .then(returned => {\n            setPersons(persons.map(\n              person => person.id !== newPerson.id \n              ? person \n              : returned))\n\n            setTempMessage(`Person ${newName} was updated succesfully`, 'green')\n          })\n          .catch(() => {\n            setTempMessage(`Person '${newName}' was already removed from server`,\n              'red')\n            setPersons(persons.filter(p => p.id !== newPerson.id))\n          })\n      }\n    } \n    setNewName('')\n    setNewNumber('')\n  }\n\n  const shownPersons = newSearch === '' ?\n                       persons :\n                       persons.filter(person => \n                        person.name.toLowerCase().includes(newSearch.toLowerCase()))\n                   \n  return (\n    <div>\n      <Notification message={message.message} className={message.className} />\n      <h2>Phonebook</h2>\n      <Filter search={newSearch} handleSearchChange={handleSearchChange} />\n      <h2>Add a new contact</h2>\n      <PersonForm onSubmit={addPerson} newName={newName}\n                  handleNameChange={handleNameChange}\n                  newNumber={newNumber} \n                  handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <Persons persons={shownPersons} handleDelete={handleDelete}\n       setTempMessage={setTempMessage} />\n    </div>\n  )\n}\n\n\nexport default App","import ReactDOM from 'react-dom'\nimport React from 'react'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}